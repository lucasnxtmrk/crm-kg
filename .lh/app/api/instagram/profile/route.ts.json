{
    "sourceFile": "app/api/instagram/profile/route.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1745360729877,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1745360837457,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,16 @@\n-import { NextResponse } from 'next/server';\r\n+// app/api/instagram/profile/route.ts\r\n+import { NextRequest } from 'next/server';\r\n \r\n-export async function GET(req: Request) {\r\n+export async function GET(req: NextRequest) {\r\n   const { searchParams } = new URL(req.url);\r\n   const username = searchParams.get('username');\r\n \r\n   if (!username) {\r\n-    return NextResponse.json({ error: 'Username is required' }, { status: 400 });\r\n+    return new Response(JSON.stringify({ error: 'Username is required' }), {\r\n+      status: 400,\r\n+      headers: { 'Content-Type': 'application/json' },\r\n+    });\r\n   }\r\n \r\n   try {\r\n     const response = await fetch(`https://instagram-profile1.p.rapidapi.com/getprofile/${username}`, {\r\n@@ -16,13 +20,20 @@\n       },\r\n     });\r\n \r\n     if (!response.ok) {\r\n-      throw new Error('Failed to fetch data');\r\n+      throw new Error('Erro ao buscar perfil');\r\n     }\r\n \r\n     const data = await response.json();\r\n-    return NextResponse.json(data);\r\n+\r\n+    return new Response(JSON.stringify(data), {\r\n+      status: 200,\r\n+      headers: { 'Content-Type': 'application/json' },\r\n+    });\r\n   } catch (error) {\r\n-    return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 });\r\n+    return new Response(JSON.stringify({ error: 'Erro ao buscar dados do Instagram' }), {\r\n+      status: 500,\r\n+      headers: { 'Content-Type': 'application/json' },\r\n+    });\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1745360933032,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,38 +1,53 @@\n-// app/api/instagram/profile/route.ts\r\n import { NextRequest } from 'next/server';\r\n \r\n export async function GET(req: NextRequest) {\r\n   const { searchParams } = new URL(req.url);\r\n   const username = searchParams.get('username');\r\n \r\n+  console.log(\"üîç Recebido username:\", username);\r\n+\r\n   if (!username) {\r\n+    console.log(\"‚ùå Nenhum username informado\");\r\n     return new Response(JSON.stringify({ error: 'Username is required' }), {\r\n       status: 400,\r\n       headers: { 'Content-Type': 'application/json' },\r\n     });\r\n   }\r\n \r\n   try {\r\n-    const response = await fetch(`https://instagram-profile1.p.rapidapi.com/getprofile/${username}`, {\r\n-      headers: {\r\n-        'X-RapidAPI-Key': process.env.RAPIDAPI_KEY as string,\r\n-        'X-RapidAPI-Host': 'instagram-profile1.p.rapidapi.com',\r\n-      },\r\n-    });\r\n+    const url = `https://instagram-profile1.p.rapidapi.com/getprofile/${username}`;\r\n+    const headers = {\r\n+      'X-RapidAPI-Key': process.env.RAPIDAPI_KEY as string,\r\n+      'X-RapidAPI-Host': 'instagram-profile1.p.rapidapi.com',\r\n+    };\r\n \r\n+    console.log(\"üåê Fazendo requisi√ß√£o para:\", url);\r\n+    console.log(\"üì¶ Headers:\", headers);\r\n+\r\n+    const response = await fetch(url, { headers });\r\n+\r\n+    console.log(\"üì• Status da resposta:\", response.status);\r\n+\r\n     if (!response.ok) {\r\n-      throw new Error('Erro ao buscar perfil');\r\n+      const text = await response.text();\r\n+      console.error(\"‚ùå Falha na resposta:\", text);\r\n+      return new Response(JSON.stringify({ error: 'Erro ao buscar perfil' }), {\r\n+        status: response.status,\r\n+        headers: { 'Content-Type': 'application/json' },\r\n+      });\r\n     }\r\n \r\n     const data = await response.json();\r\n+    console.log(\"‚úÖ Dados recebidos:\", data);\r\n \r\n     return new Response(JSON.stringify(data), {\r\n       status: 200,\r\n       headers: { 'Content-Type': 'application/json' },\r\n     });\r\n-  } catch (error) {\r\n-    return new Response(JSON.stringify({ error: 'Erro ao buscar dados do Instagram' }), {\r\n+  } catch (error: any) {\r\n+    console.error(\"üî• Erro inesperado:\", error.message);\r\n+    return new Response(JSON.stringify({ error: 'Erro interno no servidor' }), {\r\n       status: 500,\r\n       headers: { 'Content-Type': 'application/json' },\r\n     });\r\n   }\r\n"
                }
            ],
            "date": 1745360729877,
            "name": "Commit-0",
            "content": "import { NextResponse } from 'next/server';\r\n\r\nexport async function GET(req: Request) {\r\n  const { searchParams } = new URL(req.url);\r\n  const username = searchParams.get('username');\r\n\r\n  if (!username) {\r\n    return NextResponse.json({ error: 'Username is required' }, { status: 400 });\r\n  }\r\n\r\n  try {\r\n    const response = await fetch(`https://instagram-profile1.p.rapidapi.com/getprofile/${username}`, {\r\n      headers: {\r\n        'X-RapidAPI-Key': process.env.RAPIDAPI_KEY as string,\r\n        'X-RapidAPI-Host': 'instagram-profile1.p.rapidapi.com',\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error('Failed to fetch data');\r\n    }\r\n\r\n    const data = await response.json();\r\n    return NextResponse.json(data);\r\n  } catch (error) {\r\n    return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 });\r\n  }\r\n}\r\n"
        }
    ]
}