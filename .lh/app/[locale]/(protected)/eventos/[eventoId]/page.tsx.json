{
    "sourceFile": "app/[locale]/(protected)/eventos/[eventoId]/page.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1746646283968,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1746646283968,
            "name": "Commit-0",
            "content": "'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useParams } from 'next/navigation'\r\nimport {\r\n  Tabs,\r\n  TabsList,\r\n  TabsTrigger,\r\n  TabsContent,\r\n} from '@/components/ui/tabs'\r\n\r\nimport RankingLeaderboard from './components/Ranking'\r\nimport ListaParticipantesEvento from './components/ListaInfluencers'\r\n\r\ninterface Participante {\r\n  id: string\r\n  influencer_id: string // <- adicione este campo corretamente\r\n  atingido: number\r\n  meta: number\r\n  influenciador: {\r\n    nome: string\r\n    imagem: string\r\n  }\r\n}\r\n\r\nexport default function EventoPage() {\r\n  const { eventoId } = useParams() as { eventoId: string }\r\n  const [participantes, setParticipantes] = useState<Participante[]>([])\r\n\r\n  useEffect(() => {\r\n    fetch(`/api/eventos/${eventoId}`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if (Array.isArray(data.participantes)) {\r\n          setParticipantes(data.participantes)\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.error('Erro ao buscar participantes:', err)\r\n      })\r\n  }, [eventoId])\r\n\r\n  const participantesFormatados = participantes.map((p) => ({\r\n    id: p.id,\r\n    influencer_id: p.influencer_id, // certo\r\n    nome: p.influenciador.nome,\r\n    imagem: p.influenciador.imagem || '/avatar.png',\r\n    atingido: p.atingido,\r\n    meta: p.meta\r\n  }))\r\n  \r\n\r\n  return (\r\n    <div className=\"min-h-screen\">\r\n      <Tabs defaultValue=\"ranking\" className=\"w-full h-full\">\r\n        <TabsList className=\"w-full flex justify-center bg-[#230621] rounded-xl shadow-lg text-white rounded-lg\">\r\n          <TabsTrigger value=\"ranking\" className=\"px-4 rounded-full data-[state=inactive]:text-white\">üèÜ Ranking</TabsTrigger>\r\n          <TabsTrigger value=\"participantes\" className=\"px-4 py-2 rounded-full data-[state=inactive]:text-white\">üë• Influencers</TabsTrigger>\r\n        </TabsList>\r\n\r\n        <TabsContent value=\"ranking\" className=\"w-full h-full\">\r\n          <RankingLeaderboard participantes={participantesFormatados} />\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"participantes\" className=\"w-full h-full\">\r\n        <ListaParticipantesEvento\r\n          participantes={participantesFormatados}\r\n          eventoId={eventoId}\r\n          onUpdateParticipantes={() => {\r\n          fetch(`/api/eventos/${eventoId}`)\r\n          .then(res => res.json())\r\n          .then(data => {\r\n          if (Array.isArray(data.participantes)) {\r\n          setParticipantes(data.participantes)\r\n        }\r\n      })\r\n  }}\r\n/>        </TabsContent>\r\n      </Tabs>\r\n    </div>\r\n  )\r\n}\r\n"
        }
    ]
}