{
    "sourceFile": "app/[locale]/(protected)/blacklist/components/lista/columns.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1745344024078,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1745344024078,
            "name": "Commit-0",
            "content": "'use client';\r\n\r\nimport { ColumnDef } from '@tanstack/react-table';\r\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Eye, SquarePen, Trash2 } from 'lucide-react';\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';\r\nimport { cn } from '@/lib/utils';\r\nimport { Influenciador } from '@/lib/influenciadores';\r\n\r\n\r\ntype Props = {\r\n  onView: (influenciador: Influenciador) => void;\r\n};\r\n\r\nexport const getColumns = ({ onView }: Props): ColumnDef<Influenciador>[] => [\r\n  {\r\n    id: 'select',\r\n    header: ({ table }) => (\r\n      <Checkbox\r\n        checked={\r\n          table.getIsAllPageRowsSelected() ||\r\n          (table.getIsSomePageRowsSelected() && 'indeterminate')\r\n        }\r\n        onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}\r\n        aria-label=\"Selecionar tudo\"\r\n      />\r\n    ),\r\n    cell: ({ row }) => (\r\n      <Checkbox\r\n        checked={row.getIsSelected()}\r\n        onCheckedChange={(value) => row.toggleSelected(!!value)}\r\n        aria-label=\"Selecionar linha\"\r\n      />\r\n    ),\r\n    enableSorting: false,\r\n    enableHiding: false,\r\n  },\r\n  {\r\n    accessorKey: 'dataCadastro',\r\n    header: ({ column }) => (\r\n      <button\r\n        onClick={() => column.toggleSorting(column.getIsSorted() === 'asc')}\r\n        className=\"flex items-center gap-1\"\r\n      >\r\n        Data de Cadastro{' '}\r\n        {column.getIsSorted() === 'asc' ? '⬆️' : column.getIsSorted() === 'desc' ? '⬇️' : ''}\r\n      </button>\r\n    ),\r\n    cell: ({ row }) => {\r\n      const data = row.original.dataCadastro;\r\n      \r\n      if (!data) return <span className=\"text-muted-foreground\">Sem data</span>;\r\n    \r\n      const [ano, mes, dia] = data.split('-');\r\n      return <span>{`${dia}/${mes}/${ano}`}</span>;\r\n    },\r\n  },\r\n  {\r\n    accessorKey: 'nome',\r\n    header: ({ column }) => (\r\n      <button\r\n        onClick={() => column.toggleSorting(column.getIsSorted() === 'asc')}\r\n        className=\"flex items-center gap-1\"\r\n      >\r\n        Nome {column.getIsSorted() === 'asc' ? '⬆️' : column.getIsSorted() === 'desc' ? '⬇️' : ''}\r\n      </button>\r\n    ),\r\n    cell: ({ row }) => {\r\n      const { nome, imagem } = row.original;\r\n      return (\r\n        <div className=\"flex items-center gap-3\">\r\n          <Avatar className=\"w-8 h-8\">\r\n            {imagem ? <AvatarImage src={imagem} /> : <AvatarFallback>INF</AvatarFallback>}\r\n          </Avatar>\r\n          <span>{nome}</span>\r\n        </div>\r\n      );\r\n    },\r\n  },\r\n  {\r\n    accessorKey: 'instagram',\r\n    header: 'Instagram',\r\n    cell: ({ row }) => (\r\n      <a\r\n        href={row.original.instagram}\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n        className=\"text-blue-600 underline text-sm\"\r\n      >\r\n        @{row.original.instagram.replace('https://instagram.com/', '')}\r\n      </a>\r\n    ),\r\n  },\r\n  {\r\n    accessorKey: 'cpf',\r\n    header: 'CPF',\r\n    cell: ({ row }) => <span>{row.original.cpf}</span>,\r\n  },\r\n  {\r\n    id: 'meta',\r\n    header: 'Meta',\r\n    cell: ({ row }) => {\r\n      const rel = row.original.relacoes?.[0] ?? {};\r\n      return <span>R$ {rel?.meta?.toLocaleString('pt-BR') || '0'}</span>;\r\n    },\r\n  },\r\n  {\r\n    id: 'atingido',\r\n    header: 'Atingido',\r\n    cell: ({ row }) => {\r\n      const rel = row.original.relacoes?.[0] ?? {};\r\n      return <span>R$ {rel?.atingido?.toLocaleString('pt-BR') || '0'}</span>;\r\n    },\r\n  },\r\n  {\r\n    id: 'reembolso',\r\n    header: 'Reembolso',\r\n    cell: ({ row }) => {\r\n      const rel = row.original.relacoes?.[0] ?? {};\r\n      const meta = rel?.meta || 0;\r\n      const atingido = rel?.atingido || 0;\r\n      const reembolso = meta > atingido ? meta - atingido : 0;\r\n  \r\n      const reembolsoClass =\r\n        reembolso > 0 ? 'text-red-500 font-medium' : 'text-green-600 font-medium';\r\n  \r\n      return <span className={reembolsoClass}>R$ {reembolso.toLocaleString('pt-BR')}</span>;\r\n    },\r\n  },\r\n  \r\n  {\r\n    id: 'statusMeta',\r\n    header: () => (\r\n      <div className=\"w-full text-center font-medium\">Status da Meta</div>\r\n    ),\r\n    cell: ({ row }) => {\r\n      const rel = row.original.relacoes?.[0] ?? {};\r\n      const meta = rel?.meta || 0;\r\n      const atingido = rel?.atingido || 0;\r\n  \r\n      const statusLabel =\r\n        meta === 0 && atingido === 0\r\n          ? 'Meta indefinida'\r\n          : atingido >= meta\r\n          ? 'Meta batida'\r\n          : 'Meta pendente';\r\n  \r\n      const statusClass =\r\n        meta === 0 && atingido === 0\r\n          ? 'bg-muted text-muted-foreground'\r\n          : atingido >= meta\r\n          ? 'bg-green-500 text-white'\r\n          : 'bg-yellow-400 text-yellow-900';\r\n  \r\n      return (\r\n        <div\r\n          className={cn(\r\n            'w-[140px] mx-auto flex items-center justify-center px-2 py-1 rounded-full text-xs font-medium text-center whitespace-nowrap transition',\r\n            statusClass\r\n          )}\r\n        >\r\n          {statusLabel}\r\n        </div>\r\n      );\r\n    },\r\n  },\r\n  \r\n  {\r\n    id: 'actions',\r\n    header: 'Ações',\r\n    cell: ({ row }) => (\r\n      <div className=\"flex gap-2\">\r\n        <TooltipProvider>\r\n          <Tooltip>\r\n            <TooltipTrigger asChild>\r\n              <Button\r\n                size=\"icon\"\r\n                variant=\"outline\"\r\n                onClick={() => onView(row.original)}\r\n              >\r\n                <Eye className=\"w-4 h-4\" />\r\n              </Button>\r\n            </TooltipTrigger>\r\n            <TooltipContent>Visualizar</TooltipContent>\r\n          </Tooltip>\r\n        </TooltipProvider>\r\n\r\n        {/* Apagando o botão \"Editar\" */}\r\n\r\n        <TooltipProvider>\r\n          <Tooltip>\r\n            <TooltipTrigger asChild>\r\n              <Button size=\"icon\" variant=\"outline\">\r\n                <Trash2 className=\"w-4 h-4\" />\r\n              </Button>\r\n            </TooltipTrigger>\r\n            <TooltipContent>Excluir</TooltipContent>\r\n          </Tooltip>\r\n        </TooltipProvider>\r\n      </div>\r\n    ),\r\n  },\r\n];\r\n"
        }
    ]
}